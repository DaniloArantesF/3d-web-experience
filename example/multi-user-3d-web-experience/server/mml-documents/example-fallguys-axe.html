<m-group id="axe-group"></m-group>
<script>
  const axeGroup = document.getElementById("axe-group");
  const now = document.timeline.currentTime;

  const totalAxes = 9;
  const axeSwingTime = 4000;

  function createPingPongAnim(element, attr, start, end, startTime, duration, pingPongDelay) {
    const anim = document.createElement("m-attr-anim");
    anim.setAttribute("attr", attr);
    anim.setAttribute("start", start);
    anim.setAttribute("end", end);
    anim.setAttribute("start-time", startTime);
    anim.setAttribute("duration", duration);
    anim.setAttribute("ping-pong", true);
    anim.setAttribute("ping-pong-delay", pingPongDelay);
    anim.setAttribute("easing", "easeInOutQuad");
    element.appendChild(anim);
  }

  function createBase() {
    const base = document.createElement("m-model");
    base.setAttribute("src", "/assets/playground/fg_axe_base.glb");
    axeGroup.appendChild(base);
  }

  function createAxe(zPos) {
    const axeGroup = document.createElement("m-group");

    const axeRod = document.createElement("m-model");
    axeRod.setAttribute("src", "/assets/playground/fg_axe_rod.glb");
    axeRod.setAttribute("collide", false);
    axeGroup.appendChild(axeRod);

    const axeBlade = document.createElement("m-model");
    axeBlade.setAttribute("src", "/assets/playground/fg_axe_blade.glb");
    axeBlade.setAttribute("sz", 2);
    axeGroup.appendChild(axeBlade);

    axeGroup.setAttribute("z", zPos);
    axeGroup.setAttribute("y", 19.8);

    return axeGroup;
  }

  function createAxes() {
    const zOffset = -17;
    const space = 4.25;
    for (let i = 0; i < totalAxes; i++) {
      const axe = createAxe(zOffset + i * space);
      createPingPongAnim(axe, "rz", -45, 45, now * -i * 35, axeSwingTime, axeSwingTime * 0.025);
      axeGroup.appendChild(axe);
    }
  }

  createBase();
  createAxes();
</script>
